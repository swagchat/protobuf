syntax = "proto2";

package swagchat.protobuf;
option go_package = "github.com/swagchat/protobuf";

import "gogoproto/gogo.proto";
// import "github.com/gogo/protobuf/gogoproto/gogo.proto";
// import "google/protobuf/struct.proto";
// import "google/protobuf/wrappers.proto";

message Messages {
  repeated Message messages = 1;
  optional int64 allCount = 2;
  optional int32 limit = 3;
  optional int32 offset = 4;
  optional string order = 5;
}

message Message{
  option (gogoproto.goproto_unrecognized) = false;
  optional uint64 id = 11 [(gogoproto.customname) = "ID", (gogoproto.nullable) = false, (gogoproto.jsontag) = "-", (gogoproto.moretags) = "db:\"id\""];
  optional string message_id = 12 [(gogoproto.customname) = "MessageID", (gogoproto.nullable) = false, (gogoproto.jsontag) = "messageId", (gogoproto.moretags) = "db:\"message_id\""];
  optional string room_id = 13 [(gogoproto.customname) = "RoomID", (gogoproto.nullable) = false, (gogoproto.jsontag) = "roomId", (gogoproto.moretags) = "db:\"room_id\""];
  optional string user_id = 14 [(gogoproto.customname) = "UserID", (gogoproto.nullable) = false, (gogoproto.jsontag) = "userId", (gogoproto.moretags) = "db:\"user_id\""];
  optional string type = 15 [(gogoproto.nullable) = false, (gogoproto.moretags) = "db:\"type\""];
  optional MessagePayload payload = 16 [(gogoproto.nullable) = false, (gogoproto.moretags) = "db:\"payload\""];
  optional int32 role = 17 [(gogoproto.nullable) = false, (gogoproto.moretags) = "db:\"role\""];
  optional int64 created = 30 [(gogoproto.nullable) = false, (gogoproto.moretags) = "db:\"created\""];
  optional int64 modified = 31 [(gogoproto.nullable) = false, (gogoproto.moretags) = "db:\"modified\""];
  optional string event_name = 41 [(gogoproto.nullable) = false, (gogoproto.jsontag) = "eventName", (gogoproto.moretags) = "db:\"-\""];
}

message MessagePayload {
  // text
  optional string text = 1 [(gogoproto.nullable) = false];

  // image
  optional string mime = 11 [(gogoproto.nullable) = false];
  optional string filename = 12 [(gogoproto.nullable) = false];
  optional string sourceUrl = 13 [(gogoproto.nullable) = false];
  optional string thumbnailUrl = 14 [(gogoproto.nullable) = false];
  optional int32 width = 15 [(gogoproto.nullable) = false];
  optional int32 height = 16 [(gogoproto.nullable) = false];
}
